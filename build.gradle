plugins {
    id 'application'
    id 'com.github.johnrengelman.shadow' version '7.1.0'
    id 'java'
}

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

mainClassName = 'org.mcphackers.mcp.MCP'

repositories {
    mavenCentral()
    maven { url 'https://jitpack.io' }
    flatDir {
        dirs "libs"
    }
}

dependencies {
    // Required libraries
    implementation 'com.github.MCPHackers:RetroFernflower:27123b6ebe'
    implementation 'com.github.ModCoderPack:MCInjector:3.8'
    implementation 'org.fusesource.jansi:jansi:2.4.0'
    implementation name: 'retroguard'
}

application {
    // Redirect all execution into the testing folder
    mainClass = 'org.mcphackers.mcp.MCP'
    executableDir = 'test'
}

runShadow {

}

task decompile(type: JavaExec) {
    group 'RetroMCP-Java'

    classpath = sourceSets.main.runtimeClasspath
    main = mainClassName
    workingDir 'test'
    args 'decompile', '-debug'
}

/*task setup(type: JavaExec) {
    group = 'RetroMCP-Java'
    standardInput = System.in

    classpath = sourceSets.main.runtimeClasspath
    main = mainClassName
    workingDir 'test'
    args 'setup', '-debug'
}*/